<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 네임스페이스 설정 -->
<!-- 절대 SQL 구문 끝에 ;(세미콜론)을 넣지 마시오 -->

<!-- itemDB 관련 구문 -->

<mapper namespace="Mapper">

<!-- map에 seq와 qty 를 넣어서 하자. -->
<insert id="UpdateItemquantity" parameterType="map">
update itemDB set qty= qty+#{qty} where id=#{seq}
</insert>

	<insert id="deleteItemBySeq" parameterType="int">
		delete from itemDB where name=#{seq}
	</insert>

	<insert id="Item" parameterType="model.itemVO">
		insert into itemDB values(item_seq.nextval,
		#{name},#{price},#{discount},#{seller_id}, sysdate,#{category_num},#{qty})
	</insert>

	<insert id="ItemUpload" parameterType="model.itemVO">
		insert into itemDB values(item_seq.nextval,
		#{name},#{price},#{discount},#{seller_id}, sysdate,#{category_num},#{qty},#{desc},0)
	</insert>

	<select id="ItemAll" resultType="model.itemVO">
		select * from itemDB
	</select>

	<select id="ItemSaleRecordSearch" resultType="int">
		<![CDATA[	select salerecord from (select * from itemDB order by salerecord desc, seq) where rownum <=10 ]]>
	</select>
	
	<select id="ItemSaleRecordSum" resultType="int">
		select sum(salerecord) from itemdb
	</select>

	<select id="selectName" parameterType="int" resultType="string">
		SELECT ITEMNAME FROM itemDB WHERE SEQ = #{seq}
	</select>

	<select id="selectByPrice" resultType="model.itemVO">
		select * from itemDB order by price
	</select>
	
	<select id="itemNextval" resultType="int">
		SELECT  LAST_NUMBER FROM USER_SEQUENCES WHERE SEQUENCE_NAME = 'ITEM_SEQ'
	</select>
	
	<select id="ItemNameBySeq" parameterType="int" resultType="string">
		SELECT name FROM itemDB WHERE seq = #{seq}
	</select>

	<select id="ItemOrderByPrice" resultType="model.itemVO">
		select * from itemDB order by price
	</select>


	<select id="searchItemsBySellerId" parameterType="String" resultType="model.itemVO">
		select * from itemDB where seller_id like '%'||#{seller_id}||'%'
	</select>
	
	<select id="searchItemByItemName" parameterType="String" resultType="model.itemVO">
		select * from itemDB where itemname like '%'||#{itemname}||'%'
	</select>
	
	<select id="searchItemsByNameOrSellerId" parameterType="String" resultType="model.itemVO">
		select * from itemDB where itemname like '%'||#{itemname}||'%' or seller_id like '%'||#{seller_id}||'%'
	</select>	
	
<!--  soldItemDB 관련 구문 -->

<!--  cartItemDB 관련 구문 -->
<insert id="cartItem" parameterType="model.cartItemVO">
insert into cartItemDB values(#{item_seq), #{buyer_id},#{quantity})
</insert>

<select id="cartListById" parameterType="String" resultType="model.cartItemVO">
select * from cartItemDB where buyer_id=#{buyer_id}
</select>

<!--  buyerDB 관련 구문 -->

<insert id="signUpBuyer" parameterType="model.buyerVO">
	insert into buyerDB values(buyer_seq.nextval, #{buyerId}, #{buyerPw} ,#{buyerName})
</insert>


<select id="loginBuyer" parameterType="model.buyerVO" resultType="model.buyerVO">
	select #{buyerId} from buyerDB where buyer_pw = #{buyerPw}
</select>

<insert id="1" parameterType="model.buyerVO">
insert into buyerDB values{3개}
</insert>

<!--  sellerDB 관련 구문 -->


</mapper>